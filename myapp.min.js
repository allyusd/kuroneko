angular.module("myApp",["ui.router","myApp.controllers","myApp.services","myApp.directives","myApp.filters"]).config(["$stateProvider","$urlRouterProvider",function(b,a){a.otherwise("/main");b.state("main",{url:"/main",templateUrl:"partials/main.html",controller:"MainCtrl"}).state("main.view1",{url:"/view1",templateUrl:"partials/partial1.html",controller:"MyCtrl1"}).state("main.view2",{url:"/view2",templateUrl:"partials/partial2.html",controller:"MyCtrl2"})}]).run(["gamecore",function(b){console.log(b.sayHello())}]);
angular.module("myApp.services",[]);function LocalStorage(b){this.namespace=b}LocalStorage.prototype.saveStorage=function(b,a){window.localStorage[this.namespace+"."+b]=JSON.stringify(a)};LocalStorage.prototype.loadStorage=function(b){if(b=window.localStorage[this.namespace+"."+b])return JSON.parse(b)};angular.module("myApp.controllers",[]).controller("MainCtrl",["$scope","gamecore",function(b,a){b.gamecore=a}]).controller("MyCtrl1",["$scope","gamecore",function(b,a){b.gamecore=a;b.resources=a.resources;b.actions=a.actions}]).controller("MyCtrl2",["$scope","gamecore",function(b,a){b.gamecore=a;b.resources=a.resources;b.actions=a.actions}]);angular.module("myApp.directives",[]).directive("appVersion",["version",function(b){return function(a,f,e){f.text(b)}}]);var myApp=angular.module("myApp.services");myApp.factory("localstorage",[function(){return LocalStorage}]);angular.module("myApp.filters",[]).filter("interpolate",["version",function(b){return function(a){return String(a).replace(/\%VERSION\%/mg,b)}}]).filter("orderObjectBy",function(){return function(b,a,f){var e=[];angular.forEach(b,function(a){e.push(a)});e.sort(function(b,c){return b[a]>c[a]?1:-1});f&&e.reverse();return e}});myApp=angular.module("myApp.services");
myApp.service("action",["resources",function(b){function a(a,b,d,f,e){var g={};g.name=a;g.sort=b;g.text=d;g.tip=f;g.click=e;c[a]=g}function f(a,b,c){var d=a;0<b&&(d=a*Math.pow(c,b));return d.toFixed(2)}function e(a,b,c){return"need "+f(a,d.resources[c].amount,b)+" soul"}var d=this,c={};d.init=function(){d.resources=b.getResources();a("findsoul",1,"Find Soul","get soul",function(){d.resources.soul.amount++});a("getImp",2,"Get Imp",e(10,1.2,"imp"),function(){var a=f(10,d.resources.imp.amount,1.2);d.resources.soul.amount>=
a&&(d.resources.imp.amount++,d.resources.soul.amount-=a,c.getImp.tip=e(10,1.2,"imp"))});a("getLand",3,"Get Land",e(100,1.2,"land"),function(){var a=f(10,d.resources.land.amount,1.2);d.resources.soul.amount>=a&&(d.resources.land.amount++,d.resources.soul.amount-=a,c.getLand.tip=e(10,1.2,"land"))})};d.getActionList=function(){return c}}]);myApp=angular.module("myApp.services");
myApp.service("gamecore",["$timeout","tickInterval","storage","resources","action",function(b,a,f,e,d){var c=this;c.tick=0;c.sayHello=function(){return"Hello, World!"};c.run=function(){$.each(c.resources,function(a,b){b.modify=0});c.resources.soul.modify+=.01*c.resources.imp.amount;c.resources.soul.modify+=.02*c.resources.land.amount;$.each(c.resources,function(a,b){b.amount+=b.modify;0>b.amount&&(b.amount=0)});f.saveStorage("resources",c.resources);c.tick++;c.timer=b(c.run,a)};c.dataReset=function(){e.dataReset();
c.resources=e.getResources();f.saveStorage("resources",c.resources)};c.resources=f.loadStorage("resources");c.resources?e.setResources(c.resources):c.resources=e.getResources();c.actions=d.getActionList();d.init();c.timer=b(c.run,a)}]);myApp=angular.module("myApp.services");myApp.service("resources",[function(){function b(a,b){var d={};d.name=a;d.sort=b;d.amount=0;d.modify=0;return d}var a=this;a.setResources=function(b){a.resources=b};a.getResources=function(){return a.resources};a.dataReset=function(){a.resources={};a.resources.soul=b("soul",1);a.resources.imp=b("imp",2);a.resources.land=b("land",3)};a.dataReset()}]);angular.module("myApp.services").value("version","0.0.0.2").value("tickInterval","100");myApp=angular.module("myApp.services");myApp.service("storage",["localstorage",function(b){var a=this;a.storage=new LocalStorage("kuroneko");a.saveStorage=function(b,e){a.storage.saveStorage(b,e)};a.loadStorage=function(b){return a.storage.loadStorage(b)};a.storage.namespace="kuroneko"}]);//# sourceMappingURL=myapp.min.js.map
